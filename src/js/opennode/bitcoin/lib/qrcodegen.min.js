/**
 * QR Code generator library (JavaScript)
 *
 * Copyright (c) Project Nayuki. (MIT License)
 * https://www.nayuki.io/page/qr-code-generator-library
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 * - The above copyright notice and this permission notice shall be included in
 *   all copies or substantial portions of the Software.
 * - The Software is provided "as is", without warranty of any kind, express or
 *   implied, including but not limited to the warranties of merchantability,
 *   fitness for a particular purpose and noninfringement. In no event shall the
 *   authors or copyright holders be liable for any claim, damages or other
 *   liability, whether in an action of contract, tort or otherwise, arising from,
 *   out of or in connection with the Software or the use or other dealings in the
 *   Software.
 */
"use strict";var qrcodegen=new function(){this.QrCode=function(o,a,i,h){if(o<e||o>r)throw"Version value out of range";if(h<-1||h>7)throw"Mask value out of range";if(!(a instanceof n))throw"QrCode.Ecc expected";for(var f=4*o+17,u=[],c=0;c<f;c++)u.push(!1);var l=[],d=[];for(c=0;c<f;c++)l.push(u.slice()),d.push(u.slice());if(function(){for(var t=0;t<f;t++)C(6,t,t%2==0),C(t,6,t%2==0);m(3,3),m(f-4,3),m(3,f-4);for(var e=function(){if(1==o)return[];for(var t=Math.floor(o/7)+2,e=32==o?26:2*Math.ceil((f-13)/(2*t-2)),r=[6],n=f-7;r.length<t;n-=e)r.splice(1,0,n);return r}(),r=e.length,t=0;t<r;t++)for(var n=0;n<r;n++)0==t&&0==n||0==t&&n==r-1||t==r-1&&0==n||p(e[t],e[n]);E(0),function(){if(o<7)return;for(var t=o,e=0;e<12;e++)t=t<<1^7973*(t>>>11);var r=o<<12|t;if(r>>>18!=0)throw"Assertion error";for(var e=0;e<18;e++){var n=M(r,e),a=f-11+e%3,i=Math.floor(e/3);C(a,i,n),C(i,a,n)}}()}(),function(e){if(e.length!=Math.floor(t.getNumRawDataModules(o)/8))throw"Invalid argument";for(var r=0,n=f-1;n>=1;n-=2){6==n&&(n=5);for(var a=0;a<f;a++)for(var i=0;i<2;i++){var s=n-i,h=0==(n+1&2),u=h?f-1-a:a;!d[u][s]&&r<8*e.length&&(l[u][s]=M(e[r>>>3],7-(7&r)),r++)}}if(r!=8*e.length)throw"Assertion error"}(function(e){if(e.length!=t.getNumDataCodewords(o,a))throw"Invalid argument";for(var r=t.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][o],n=t.ECC_CODEWORDS_PER_BLOCK[a.ordinal][o],i=Math.floor(t.getNumRawDataModules(o)/8),h=r-i%r,f=Math.floor(i/r),u=[],c=new s(n),l=0,d=0;l<r;l++){var g=e.slice(d,d+f-n+(l<h?0:1));d+=g.length;var v=c.getRemainder(g);l<h&&g.push(0),u.push(g.concat(v))}for(var E=[],l=0;l<u[0].length;l++)for(var m=0;m<u.length;m++)(l!=f-n||m>=h)&&E.push(u[m][l]);if(E.length!=i)throw"Assertion error";return E}(i)),-1==h){var g=1/0;for(c=0;c<8;c++){w(c),E(c);var v=R();v<g&&(h=c,g=v),w(c)}}if(h<0||h>7)throw"Assertion error";function E(t){for(var e=a.formatBits<<3|t,r=e,n=0;n<10;n++)r=r<<1^1335*(r>>>9);var o=21522^(e<<10|r);if(o>>>15!=0)throw"Assertion error";for(n=0;n<=5;n++)C(8,n,M(o,n));C(8,7,M(o,6)),C(8,8,M(o,7)),C(7,8,M(o,8));for(n=9;n<15;n++)C(14-n,8,M(o,n));for(n=0;n<8;n++)C(f-1-n,8,M(o,n));for(n=8;n<15;n++)C(8,f-15+n,M(o,n));C(8,f-8,!0)}function m(t,e){for(var r=-4;r<=4;r++)for(var n=-4;n<=4;n++){var o=Math.max(Math.abs(n),Math.abs(r)),a=t+n,i=e+r;0<=a&&a<f&&0<=i&&i<f&&C(a,i,2!=o&&4!=o)}}function p(t,e){for(var r=-2;r<=2;r++)for(var n=-2;n<=2;n++)C(t+n,e+r,1!=Math.max(Math.abs(n),Math.abs(r)))}function C(t,e,r){l[e][t]=r,d[e][t]=!0}function w(t){if(t<0||t>7)throw"Mask value out of range";for(var e=0;e<f;e++)for(var r=0;r<f;r++){var n;switch(t){case 0:n=(r+e)%2==0;break;case 1:n=e%2==0;break;case 2:n=r%3==0;break;case 3:n=(r+e)%3==0;break;case 4:n=(Math.floor(r/3)+Math.floor(e/2))%2==0;break;case 5:n=r*e%2+r*e%3==0;break;case 6:n=(r*e%2+r*e%3)%2==0;break;case 7:n=((r+e)%2+r*e%3)%2==0;break;default:throw"Assertion error"}!d[e][r]&&n&&(l[e][r]=!l[e][r])}}function R(){for(var e=0,r=0;r<f;r++){for(var n=[0,0,0,0,0,0,0],o=!1,a=0,i=0;i<f;i++)l[r][i]==o?5==++a?e+=t.PENALTY_N1:a>5&&e++:(t.addRunToHistory(a,n),!o&&t.hasFinderLikePattern(n)&&(e+=t.PENALTY_N3),o=l[r][i],a=1);t.addRunToHistory(a,n),o&&t.addRunToHistory(0,n),t.hasFinderLikePattern(n)&&(e+=t.PENALTY_N3)}for(i=0;i<f;i++){n=[0,0,0,0,0,0,0],o=!1;var s=0;for(r=0;r<f;r++)l[r][i]==o?5==++s?e+=t.PENALTY_N1:s>5&&e++:(t.addRunToHistory(s,n),!o&&t.hasFinderLikePattern(n)&&(e+=t.PENALTY_N3),o=l[r][i],s=1);t.addRunToHistory(s,n),o&&t.addRunToHistory(0,n),t.hasFinderLikePattern(n)&&(e+=t.PENALTY_N3)}for(r=0;r<f-1;r++)for(i=0;i<f-1;i++){(o=l[r][i])==l[r][i+1]&&o==l[r+1][i]&&o==l[r+1][i+1]&&(e+=t.PENALTY_N2)}var h=0;l.forEach(function(t){t.forEach(function(t){t&&h++})});var u=f*f;return e+=(Math.ceil(Math.abs(20*h-10*u)/u)-1)*t.PENALTY_N4}function M(t,e){return 0!=(t>>>e&1)}w(h),E(h),d=null,Object.defineProperty(this,"version",{value:o}),Object.defineProperty(this,"size",{value:f}),Object.defineProperty(this,"errorCorrectionLevel",{value:a}),Object.defineProperty(this,"mask",{value:h}),this.getModule=function(t,e){return 0<=t&&t<f&&0<=e&&e<f&&l[e][t]},this.drawCanvas=function(t,e,r){if(t<=0||e<0)throw"Value out of range";var n=(f+2*e)*t;r.width=n,r.height=n;for(var o=r.getContext("2d"),a=-e;a<f+e;a++)for(var i=-e;i<f+e;i++)o.fillStyle=this.getModule(i,a)?"#000000":"#FFFFFF",o.fillRect((i+e)*t,(a+e)*t,t,t)},this.toSvgString=function(t){if(t<0)throw"Border must be non-negative";for(var e=[],r=0;r<f;r++)for(var n=0;n<f;n++)this.getModule(n,r)&&e.push("M"+(n+t)+","+(r+t)+"h1v1h-1z");return'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+(f+2*t)+" "+(f+2*t)+'" stroke="none">\n\t<rect width="100%" height="100%" fill="#FFFFFF"/>\n\t<path d="'+e.join(" ")+'" fill="#000000"/>\n</svg>\n'}},this.QrCode.encodeText=function(t,e){var r=qrcodegen.QrSegment.makeSegments(t);return this.encodeSegments(r,e)},this.QrCode.encodeBinary=function(t,e){var r=qrcodegen.QrSegment.makeBytes(t);return this.encodeSegments([r],e)},this.QrCode.encodeSegments=function(n,o,a,i,s,f){if(null==a&&(a=e),null==i&&(i=r),null==s&&(s=-1),null==f&&(f=!0),!(e<=a&&a<=i&&i<=r)||s<-1||s>7)throw"Invalid value";var u,c;for(u=a;;u++){var l=8*t.getNumDataCodewords(u,o);if((c=qrcodegen.QrSegment.getTotalBits(n,u))<=l)break;if(u>=i)throw"Data too long"}[this.Ecc.MEDIUM,this.Ecc.QUARTILE,this.Ecc.HIGH].forEach(function(e){f&&c<=8*t.getNumDataCodewords(u,e)&&(o=e)});var d=new h;if(n.forEach(function(t){d.appendBits(t.mode.modeBits,4),d.appendBits(t.numChars,t.mode.numCharCountBits(u)),t.getData().forEach(function(t){d.push(t)})}),d.length!=c)throw"Assertion error";l=8*t.getNumDataCodewords(u,o);if(d.length>l)throw"Assertion error";if(d.appendBits(0,Math.min(4,l-d.length)),d.appendBits(0,(8-d.length%8)%8),d.length%8!=0)throw"Assertion error";for(var g=236;d.length<l;g^=253)d.appendBits(g,8);for(var v=[];8*v.length<d.length;)v.push(0);return d.forEach(function(t,e){v[e>>>3]|=t<<7-(7&e)}),new this(u,o,v,s)};var t={getNumRawDataModules:function(t){if(t<e||t>r)throw"Version number out of range";var n=(16*t+128)*t+64;if(t>=2){var o=Math.floor(t/7)+2;n-=(25*o-10)*o-55,t>=7&&(n-=36)}return n},getNumDataCodewords:function(e,r){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][e]},addRunToHistory:function(t,e){e.pop(),e.unshift(t)},hasFinderLikePattern:function(t){var e=t[1];return e>0&&t[2]==e&&t[4]==e&&t[5]==e&&t[3]==3*e&&Math.max(t[0],t[6])>=4*e}},e=1,r=40;function n(t,e){Object.defineProperty(this,"ordinal",{value:t}),Object.defineProperty(this,"formatBits",{value:e})}Object.defineProperty(this.QrCode,"MIN_VERSION",{value:e}),Object.defineProperty(this.QrCode,"MAX_VERSION",{value:r}),t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[null,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[null,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[null,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[null,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[null,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[null,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[null,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[null,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],this.QrCode.Ecc={LOW:new n(0,1),MEDIUM:new n(1,0),QUARTILE:new n(2,3),HIGH:new n(3,2)},this.QrSegment=function(t,e,r){if(e<0||!(t instanceof a))throw"Invalid argument";r=r.slice(),Object.defineProperty(this,"mode",{value:t}),Object.defineProperty(this,"numChars",{value:e}),this.getData=function(){return r.slice()}},this.QrSegment.makeBytes=function(t){var e=new h;return t.forEach(function(t){e.appendBits(t,8)}),new this(this.Mode.BYTE,t.length,e)},this.QrSegment.makeNumeric=function(t){if(!this.NUMERIC_REGEX.test(t))throw"String contains non-numeric characters";for(var e=new h,r=0;r<t.length;){var n=Math.min(t.length-r,3);e.appendBits(parseInt(t.substring(r,r+n),10),3*n+1),r+=n}return new this(this.Mode.NUMERIC,t.length,e)},this.QrSegment.makeAlphanumeric=function(t){if(!this.ALPHANUMERIC_REGEX.test(t))throw"String contains unencodable characters in alphanumeric mode";var e,r=new h;for(e=0;e+2<=t.length;e+=2){var n=45*o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e));n+=o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e+1)),r.appendBits(n,11)}return e<t.length&&r.appendBits(o.ALPHANUMERIC_CHARSET.indexOf(t.charAt(e)),6),new this(this.Mode.ALPHANUMERIC,t.length,r)},this.QrSegment.makeSegments=function(t){return""==t?[]:this.NUMERIC_REGEX.test(t)?[this.makeNumeric(t)]:this.ALPHANUMERIC_REGEX.test(t)?[this.makeAlphanumeric(t)]:[this.makeBytes(i(t))]},this.QrSegment.makeEci=function(t){var e=new h;if(t<0)throw"ECI assignment value out of range";if(t<128)e.appendBits(t,8);else if(t<16384)e.appendBits(2,2),e.appendBits(t,14);else{if(!(t<1e6))throw"ECI assignment value out of range";e.appendBits(6,3),e.appendBits(t,21)}return new this(this.Mode.ECI,0,e)},this.QrSegment.getTotalBits=function(t,e){for(var r=0,n=0;n<t.length;n++){var o=t[n],a=o.mode.numCharCountBits(e);if(o.numChars>=1<<a)return 1/0;r+=4+a+o.getData().length}return r};var o={};function a(t,e){Object.defineProperty(this,"modeBits",{value:t}),this.numCharCountBits=function(t){return e[Math.floor((t+7)/17)]}}function i(t){t=encodeURI(t);for(var e=[],r=0;r<t.length;r++)"%"!=t.charAt(r)?e.push(t.charCodeAt(r)):(e.push(parseInt(t.substring(r+1,r+3),16)),r+=2);return e}function s(t){if(t<1||t>255)throw"Degree out of range";for(var e=[],r=0;r<t-1;r++)e.push(0);e.push(1);var n=1;for(r=0;r<t;r++){for(var o=0;o<e.length;o++)e[o]=s.multiply(e[o],n),o+1<e.length&&(e[o]^=e[o+1]);n=s.multiply(n,2)}this.getRemainder=function(t){var r=e.map(function(){return 0});return t.forEach(function(t){var n=t^r.shift();r.push(0),e.forEach(function(t,e){r[e]^=s.multiply(t,n)})}),r}}function h(){Array.call(this),this.appendBits=function(t,e){if(e<0||e>31||t>>>e!=0)throw"Value out of range";for(var r=e-1;r>=0;r--)this.push(t>>>r&1)}}this.QrSegment.NUMERIC_REGEX=/^[0-9]*$/,this.QrSegment.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",this.QrSegment.Mode={NUMERIC:new a(1,[10,12,14]),ALPHANUMERIC:new a(2,[9,11,13]),BYTE:new a(4,[8,16,16]),KANJI:new a(8,[8,10,12]),ECI:new a(7,[0,0,0])},s.multiply=function(t,e){if(t>>>8!=0||e>>>8!=0)throw"Byte out of range";for(var r=0,n=7;n>=0;n--)r=r<<1^285*(r>>>7),r^=(e>>>n&1)*t;if(r>>>8!=0)throw"Assertion error";return r},h.prototype=Object.create(Array.prototype),h.prototype.constructor=h};